<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Formulário de Contrato</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="javascript.js" type="module" defer></script>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <form id="contractForm">
        <div>
            <label for="numeroContrato">Número do Contrato:</label>
            <input type="text" id="numeroContrato" name="numeroContrato" pattern="[0-9]{7}" required>
        </div>
        <div>
            <label for="codCliente">Código do Cliente:</label>
            <select id="codCliente" name="codCliente" required>
                <option value="">Selecione um cliente</option>
                <option value="123">123 - João Silva</option>
                <option value="456">456 - Maria Souza</option>
                <option value="789">789 - Pedro Santos</option>
            </select>
        </div>
        <div>
            <label for="valorFinanciado">Valor Financiado:</label>
            <input type="number" id="valorFinanciado" name="valorFinanciado" min="100" required>
        </div>
        <div>
            <label for="quantidadeParcelas">Quantidade de Parcelas:</label>
            <select id="quantidadeParcelas" name="quantidadeParcelas" required>
                <option value="">Selecione a quantidade de parcelas</option>
                <option value="1">1 Parcela</option>
                <option value="12">12 Parcelas</option>
                <option value="24">24 Parcelas</option>
                <option value="48">48 Parcelas</option>
                <option value="96">96 Parcelas</option>
            </select>
        </div>
        <div>
            <label for="txFinanciamento">Taxa de Financiamento:</label>
            <span id="txFinanciamento">1,1% a.m.</span>
        </div>
        <div>
            <label for="valorParcela">Valor da Parcela:</label>
            <span id="valorParcela"></span>
        </div>
        <div>
            <label for="situacaoContrato">Situação do Contrato:</label>
            <select id="situacaoContrato" name="situacaoContrato" required>
                <option value="">Selecione a situação do contrato</option>
                <option value="1">Solicitado</option>
                <option value="2">Contratado</option>
                <option value="3">Encerrado</option>
            </select>
        </div>
        <div>
            <label for="dataInicio">Data de Início:</label>
            <input type="date" id="dataInicio" name="dataInicio">
        </div>
        <div>
            <label for="dataFim">Data de Fim:</label>
            <input type="date" id="dataFim" name="dataFim">
        </div>
        <button type="submit">Enviar</button>
    </form>

    <textarea>
        Nota: é muito importante que se faça empréstimos com boas taxas.
    div class="container">
        div class="coluna">
            select id="cboCliente" value="{@cod_cliente}" formatar="classeJS.formatarCbo">/select>
            clone retornolista.linha value="{@cod_cliente},{@tipo_pessoa}" html="{@cod_cliente_formatado} - {@nome_cliente}">
        /div>
    /div>

    formatarCbo: function(dados){
        if(dados.tipo_pessoa == 'F'){
            dados.cod_cliente_formatado = 'formatacao de cpf. dar substring(2)';
        } 
        else if(dados.tipo_pessoa == 'J'){
            dados.cod_cliente_formatado = 'formatacao de cnpj';
        }
    },
    
    clicarIncluir:function(){
        if(!/*coisas do sistema*/){
            return false;
        }
    
        var parms = /*sistema*/ 'parametros';
        parms.num_contrato = $('#txtNumContrato').val().trim();
        // lero lero
    
        var array = $('#cboCliente').val().split(','); //porque é o que tem em value
        parms.cod_cliente = array[0];
        if(array[1] == 'F'){
            parms.tipo_pessoa = 'F';
        } else if(array[1] == 'J'){
            parms.tipo_pessoa = 'J';
        }
        //continua a função

        //para alterar
        div>
            label for="txtCadastroCodCliente">Cliente\label>
            select value="{@cbo_cliente}" outros atributos >
                option value="{@cod_cliente},{@tipo_pessoa}" html={@cod_cliente} - {@nome_cliente}" outros atributos>
        /div>
        
        no js:
        
        TratarRetornoBoxDadosObter: function (oJson) {
           ...
           cbo_cliente: Json.Dados.registroUsuario.cod_cliente + ',' + Json.Dados.registroUsuario.tipo_pessoa,
           ...
        }
    }
</textarea>
</body>

</html>